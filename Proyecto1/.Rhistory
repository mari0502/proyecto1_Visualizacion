nrows = 2,
margin = 0.09
)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = list(
text = "Uso de Transporte",
y = 0.9  # Mover el título hacia arriba
),
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DIPUTADO(A)"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
annotations = list(
list(
text = "CANTIDAD",
xref = "paper", yref = "paper",
x = 0.02, y = 0.5, # Coordenadas relativas al papel (paper)
showarrow = FALSE
)
),
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = list(
text = "Uso de Transporte",
y = 0.05  # Mover el título hacia arriba
),
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DIPUTADO(A)"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
annotations = list(
list(
text = "CANTIDAD",
xref = "paper", yref = "paper",
x = 0.02, y = 0.5, # Coordenadas relativas al papel (paper)
showarrow = FALSE
)
),
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = list(
text = "Uso de Transporte",
y = 0.01  # Mover el título hacia arriba
),
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DESTINO"),  # Etiqueta del eje Y del segundo gráfico
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# -------------------------- COMBUSTIBLE , TOTAL KM, AÑO(FECHA INICIAL) -----------------------------------#
# Aggregate data
summary_segunda_faceta <- data %>%
select(`FECHA INICIAL`, `TOTAL KM`, COMBUSTIBLE)
# Take the year of each date
summary_segunda_faceta$YEAR <- year(dmy(summary_segunda_faceta$`FECHA INICIAL`))
# Create the ggplot object
segunda_faceta_plot <- ggplot(summary_segunda_faceta, aes(x = COMBUSTIBLE , y = `TOTAL KM`)) +
geom_point() +
facet_wrap(~ YEAR, scales = "free") +
labs(title = "Combustible vs. Total KM por año",
x = "COMBUSTIBLE",
y = "TOTAL KM")
# -------------------------- TIPO DE SERVICIO VS DESTINO -----------------------------------#
# Create the ggplot object
barras_aplicadas_plot <- ggplot(data, aes(fill = `TIPO SERVICIO`)) +
geom_bar(aes(y = `Destino_Group`), position = "stack", width = 0.7) +
labs(
title = "Distribución de Servicios por Destino",
x = "CANTIDAD",
y = "DESTINO",
fill = "SERVICIO"
) +
theme_minimal() +
theme(axis.text.y = element_blank())
# Convert ggplot to plotly
segunda_faceta_plotly <- ggplotly(segunda_faceta_plot)
barras_aplicadas_plotly <-  ggplotly(barras_aplicadas_plot)
# Combinar los gráficos utilizando subplot
imagen_compuesta_plot <- subplot(
segunda_faceta_plotly,
barras_aplicadas_plotly,
nrows = 2,
margin = 0.09
)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = list(
text = "Uso de Transporte",
y = 0.01  # Mover el título hacia arriba
),
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DESTINO"),  # Etiqueta del eje Y del segundo gráfico
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Combinar los gráficos utilizando subplot
imagen_compuesta_plot <- subplot(
segunda_faceta_plotly,
barras_aplicadas_plotly,
nrows = 2,
margin = 0.08
)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DESTINO"),  # Etiqueta del eje Y del segundo gráfico
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DESTINO", x = -0.05),  # Etiqueta del eje Y del segundo gráfico
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DESTINO", x = -0.15),  # Etiqueta del eje Y del segundo gráfico
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DESTINO", x = -40, y = -10),  # Etiqueta del eje Y del segundo gráfico
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DESTINO", x = -0.01, y = -0.01),  # Etiqueta del eje Y del segundo gráfico
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DESTINO", x = -100, y = -100),  # Etiqueta del eje Y del segundo gráfico, movida hacia abajo y hacia la izquierda
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
yaxis = list(title = "TOTAL KM"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "DESTINO", x = -100, y = -100),  # Etiqueta del eje Y del segundo gráfico, movida hacia abajo y hacia la izquierda
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "bottom")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Combinar los gráficos utilizando subplot
imagen_compuesta_plot <- subplot(
barras_aplicadas_plotly,
segunda_faceta_plotly,
nrows = 2,
margin = 0.08
)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "h",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
legend = list(x = 0.5, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "v",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
legend = list(x = 0.1, y = -0.1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "v",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
legend = list(x = 1, y = 1, # Posición de la leyenda (0 a 1, donde 0 es la esquina inferior izquierda y 1 es la esquina superior derecha)
orientation = "v",  # Orientación horizontal
xanchor = "center", # Anclaje horizontal en el centro
yanchor = "top")    # Anclaje vertical en la parte superior
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
legend = list(x = 1, y = 1)
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
legend = list(x = 1.1, y = 0.5,  # Posición de la leyenda (x > 1 para colocarla fuera del gráfico)
orientation = "v",  # Orientación vertical
xanchor = "left",   # Anclaje horizontal a la izquierda
yanchor = "middle") # Anclaje vertical al centro
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
legend = list(x = 1.1, y = 0.5,  # Posición de la leyenda (x > 1 para colocarla fuera del gráfico)
orientation = "v",  # Orientación vertical
xanchor = "left",   # Anclaje horizontal a la izquierda
yanchor = "middle") # Anclaje vertical al centro
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
legend = list(x = 1.1, y = 0.5,  # Posición de la leyenda (x > 1 para colocarla fuera del gráfico)
orientation = "v",  # Orientación vertical
xanchor = "left",   # Anclaje horizontal a la izquierda
yanchor = "middle"), # Anclaje vertical al centro
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE")  # Etiqueta del eje X del segundo gráfico
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Combinar los gráficos utilizando subplot
imagen_compuesta_plot <- subplot(
barras_aplicadas_plotly,
segunda_faceta_plotly,
nrows = 2,
margin = 0.08
)
# Agregar espacio entre los gráficos
imagen_compuesta_plot$x$layout$yaxis2$domain <- c(0.5, 1)
imagen_compuesta_plot$x$layout$yaxis$domain <- c(0, 0.5)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
legend = list(x = 1.1, y = 0.5,  # Posición de la leyenda (x > 1 para colocarla fuera del gráfico)
orientation = "v",  # Orientación vertical
xanchor = "left",   # Anclaje horizontal a la izquierda
yanchor = "middle") # Anclaje vertical al centro
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Combinar los gráficos utilizando subplot
imagen_compuesta_plot <- subplot(
barras_aplicadas_plotly,
segunda_faceta_plotly,
nrows = 2,
margin = 0.08
)
# Ajustar el tamaño de los gráficos
imagen_compuesta_plot$x$layout$yaxis2$domain <- c(0.5, 1)
imagen_compuesta_plot$x$layout$yaxis$domain <- c(0, 0.5)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
legend = list(x = 0.95, y = 0.5,  # Posición de la leyenda
orientation = "v",  # Orientación vertical
xanchor = "left",   # Anclaje horizontal
yanchor = "middle") # Anclaje vertical
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Combinar los gráficos utilizando subplot
imagen_compuesta_plot <- subplot(
barras_aplicadas_plotly,
segunda_faceta_plotly,
nrows = 2,
margin = 0.08
)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE"),  # Etiqueta del eje X del segundo gráfico
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Combinar los gráficos utilizando subplot
imagen_compuesta_plot <- subplot(
barras_aplicadas_plotly,
segunda_faceta_plotly,
nrows = 2,
margin = 0.08
)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE")  # Etiqueta del eje X del segundo gráfica
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# -------------------------- COMBUSTIBLE , TOTAL KM, AÑO(FECHA INICIAL) -----------------------------------#
# Aggregate data
summary_segunda_faceta <- data %>%
select(`FECHA INICIAL`, `TOTAL KM`, COMBUSTIBLE)
# Take the year of each date
summary_segunda_faceta$YEAR <- year(dmy(summary_segunda_faceta$`FECHA INICIAL`))
# Create the ggplot object
segunda_faceta_plot <- ggplot(summary_segunda_faceta, aes(x = COMBUSTIBLE , y = `TOTAL KM`)) +
geom_point() +
facet_wrap(~ YEAR, scales = "free") +
labs(title = "Combustible vs. Total KM por año",
x = "COMBUSTIBLE",
y = "TOTAL KM")
# -------------------------- TIPO DE SERVICIO VS DESTINO -----------------------------------#
# Create the ggplot object
barras_aplicadas_plot <- ggplot(data, aes(fill = `TIPO SERVICIO`)) +
geom_bar(aes(x = `Destino_Group`), position = "stack", width = 0.7) +
labs(
title = "Distribución de Servicios por Destino",
x = "DESTINO",
y = "CANTIDAD",
fill = "SERVICIO"
) +
theme_minimal() +
theme(axis.text.x = element_blank())
# Convert ggplot to plotly
segunda_faceta_plotly <- ggplotly(segunda_faceta_plot)
barras_aplicadas_plotly <-  ggplotly(barras_aplicadas_plot)
# Combinar los gráficos utilizando subplot
imagen_compuesta_plot <- subplot(
barras_aplicadas_plotly,
segunda_faceta_plotly,
nrows = 2,
margin = 0.08
)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "DESTINO"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "CANTIDAD"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE")  # Etiqueta del eje X del segundo gráfica
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE")  # Etiqueta del eje X del segundo gráfica
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
# -------------------------- TIPO DE SERVICIO VS DESTINO -----------------------------------#
# Create the ggplot object
barras_aplicadas_plot <- ggplot(data, aes(fill = `TIPO SERVICIO`)) +
geom_bar(aes(x = `Destino_Group`), position = "stack", width = 0.7) +
labs(
title = "Distribución de Servicios por Destino",
x = "DESTINO",
y = "CANTIDAD",
fill = "SERVICIO"
) +
theme_minimal()
# Convert ggplot to plotly
segunda_faceta_plotly <- ggplotly(segunda_faceta_plot)
barras_aplicadas_plotly <-  ggplotly(barras_aplicadas_plot)
# Combinar los gráficos utilizando subplot
imagen_compuesta_plot <- subplot(
barras_aplicadas_plotly,
segunda_faceta_plotly,
nrows = 2,
margin = 0.08
)
# Agregar etiquetas de los ejes y títulos a cada subgráfico
imagen_compuesta_plot <- imagen_compuesta_plot %>%
layout(
title = "Uso de Transporte",  # Título del gráfico combinado
yaxis = list(title = "CANTIDAD"),  # Etiqueta del eje Y del primer gráfico
yaxis2 = list(title = "TOTAL KM"),  # Etiqueta del eje Y del segundo gráfico
xaxis = list(title = "DESTINO"),  # Etiqueta del eje X del primer gráfico
xaxis2 = list(title = "COMBUSTIBLE")  # Etiqueta del eje X del segundo gráfica
)
# Mostrar el gráfico combinado
print(imagen_compuesta_plot)
